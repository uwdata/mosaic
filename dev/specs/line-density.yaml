data:
  stocks_after_2006: SELECT Symbol, Close, epoch(Date)::INT AS Date
        FROM 'https://uwdata.github.io/mosaic-datasets/data/stocks_after_2006.csv'
        WHERE CLOSE < 100
params:
  brush: { select: intersect }
  bandwidth: { value: 0 }
  binWidth: { value: 1 }
vconcat:
- hconcat:
  - input: slider
    label: Bandwidth (Ïƒ)
    as: $bandwidth
    min: 0
    max: 10
    step: 0.1
  - input: menu
    label: Bin Scale
    as: $binWidth
    options:
      - { value: 0.5 }
      - { value: 1 }
      - { value: 2 }
- plot:
  - mark: denseLine
    data: { from: stocks_after_2006, filterBy: $brush }
    x: Date
    y: Close
    z: Symbol
    fill: density
    bandwidth: $bandwidth
    binWidth: $binWidth
  schemeColor: viridis
  scaleColor: sqrt
  labelY: Value (normalized lines)
  niceY: true
  width: 800
  height: 300
- plot:
  - mark: denseLine
    data: { from: stocks_after_2006 }
    x: Date
    y: Close
    z: Symbol
    fill: density
    normalize: false
    bandwidth: $bandwidth
    binWidth: $binWidth
  - select: intervalXY
    as: $brush
  schemeColor: viridis
  scaleColor: sqrt
  labelY: Value (unnormalized lines)
  niceY: true
  width: 800
  height: 300